!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var n={},t={};e.ajaxq=function(r,a){if(void 0===a)throw"AjaxQ: queue name is not provided";var i=e.Deferred(),o=i.promise();o.success=o.done,o.error=o.fail,o.complete=o.always;var u="function"==typeof a,f=u?null:e.extend(!0,{},a);return function(e){if(n[r])n[r].push(e);else{n[r]=[];var a=e();t[r]=a}}(function(){var n=e.ajax.apply(window,[u?a():f]);return n.done(function(){i.resolve.apply(this,arguments)}),n.fail(function(){i.reject.apply(this,arguments)}),n.always(s),n}),o;function s(){if(n[r]){var e=n[r].shift();if(e){var a=e();t[r]=a}else delete n[r],delete t[r]}}},e.each(["getq","postq"],function(n,t){e[t]=function(n,r,a,i,o){return e.isFunction(a)&&(o=o||i,i=a,a=void 0),e.ajaxq(n,{type:"postq"===t?"post":"get",url:r,data:a,success:i,dataType:o})}});var r=function(e){return n.hasOwnProperty(e)&&n[e].length>0||t.hasOwnProperty(e)};e.ajaxq.isRunning=function(e){return e?r(e):function(){for(var e in n)if(r(e))return!0;return!1}()},e.ajaxq.getActiveRequest=function(e){if(!e)throw"AjaxQ: queue name is required";return t[e]},e.ajaxq.abort=function(r){if(!r)throw"AjaxQ: queue name is required";var a=e.ajaxq.getActiveRequest(r);delete n[r],delete t[r],a&&a.abort()},e.ajaxq.clear=function(e){if(e)n[e]&&(n[e]=[]);else for(var t in n)n.hasOwnProperty(t)&&(n[t]=[])}});