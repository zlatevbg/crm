"use strict";var uploader=function(){function e(){var e=!0,r=!1,n=void 0;try{for(var o,a=document.querySelectorAll("[data-upload]")[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;if(i.offsetParent)t({button:i,url:i.getAttribute("data-action"),multiple:i.getAttribute("data-multiple"),isFile:i.getAttribute("data-file")})}}catch(e){r=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}}function t(e){var t={button:e.button,multiple:e.multiple,allowMultipleItems:e.multiple,maxConnections:1,chunking:{enabled:!0,concurrent:{enabled:!0},success:{endpoint:e.url+"?done"}},paste:{targetElement:document},request:{endpoint:e.url,customHeaders:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}},resume:{enabled:!0},retry:{enableAuto:!0},validation:{allowedExtensions:e.isFile?unikatSettings.fineUploader.fileExtensions:unikatSettings.fineUploader.imageExtensions,stopOnFirstInvalidFile:!1},text:{defaultResponseError:unikatSettings.fineUploader.defaultResponseError,fileInputTitle:unikatSettings.fineUploader.fileInputTitle},messages:{emptyError:unikatSettings.fineUploader.emptyError,maxHeightImageError:unikatSettings.fineUploader.maxHeightImageError,maxWidthImageError:unikatSettings.fineUploader.maxWidthImageError,minHeightImageError:unikatSettings.fineUploader.minHeightImageError,minWidthImageError:unikatSettings.fineUploader.minWidthImageError,minSizeError:unikatSettings.fineUploader.minSizeError,noFilesError:unikatSettings.fineUploader.noFilesError,onLeave:unikatSettings.fineUploader.onLeave,retryFailTooManyItemsError:unikatSettings.fineUploader.retryFailTooManyItemsError,sizeError:unikatSettings.fineUploader.sizeError,tooManyItemsError:unikatSettings.fineUploader.tooManyItemsError,typeError:unikatSettings.fineUploader.typeError,unsupportedBrowserIos8Safari:unikatSettings.fineUploader.unsupportedBrowserIos8Safari},callbacks:{onSubmit:function(e,t){},onSubmitted:function(t,r){e.button.classList.contains("js-upload-single")&&this.setParams({id:datatable.selected[e.button.getAttribute("data-table")]}),ajax.clearSuccess(),document.querySelector("#upload-progress-bar-container")||e.button.closest(".datatable-sticky-header").insertAdjacentHTML("beforeend",'<div id="upload-progress-bar-container" class="qq-total-progress-bar-container-selector progress"><div id="upload-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector progress-bar bg-success progress-bar-striped progress-bar-animated"></div></div>')},onTotalProgress:function(e,t){var n=void 0,o="",a=[],i=(e/t).toFixed(2),s=r(t,this._options.text.sizeSymbols),l=r(e,this._options.text.sizeSymbols);if(a.push({totalUploadedBytes:e,currentTime:(new Date).getTime()}),a.length>20&&a.shift(),a.length>=6){var u=a[0],d=a[a.length-1],p=(8*(d.totalUploadedBytes-u.totalUploadedBytes)/((d.currentTime-u.currentTime)/1e3)/1e6).toFixed(2);p>0&&(o=" / "+p+" Mbps")}n=isNaN(i)?"0%":(100*i).toFixed()+"%";var c=document.querySelector("#upload-progress-bar");c&&(c.style.width=n,c.textContent=n+" ("+l+" "+unikatSettings.fineUploader.of+" "+s+o+")")},onComplete:function(e,t,r,n){r.data&&datatable.draw(r.data)},onAllComplete:function(e,t){if(document.querySelector("#upload-progress-bar-container").remove(),t.length>0){var r="<strong>"+unikatSettings.fineUploader.failedUploads+"</strong><br>",n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;r+=this.getName(l)+"<br>"}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}ajax.error(null,r)}e.length>0&&ajax.success(null,unikatSettings.fineUploader.uploadComplete)},onPasteReceived:function(t){if(!e.button.offsetParent)return!1},onError:function(e,t,r,n){t&&ajax.error(null,"[<strong>"+t+"</strong>] "+r)}}},n=new qq.FineUploaderBasic(t);if(t.button.classList.contains("js-upload-single")&&t.button.classList.contains("disabled")){var o=t.button.querySelector("input");o&&o.setAttribute("disabled","")}new qq.DragAndDrop({allowMultipleItems:e.multiple,dropZoneElements:[document.body],classes:{dropActive:"qq-upload-drop-area-active"},callbacks:{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(e,t){n.addFiles(e)},dropError:function(e,t){"tooManyFilesError"===e&&ajax.error(null,unikatSettings.fineUploader.multipleItemsError.replace(/\{itemLimit\}/g,1))}}})}function r(e,t){var r=-1;do{e/=1024,r++}while(e>1023);return Math.max(e,.1).toFixed(1)+t[r]}return e(),{init:e}}();