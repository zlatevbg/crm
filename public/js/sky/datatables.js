"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var datatable=function(){var e=$.fn.dataTable,t=[],a=[],r={},n="",i=!0,o=!1,l=void 0;try{for(var s,c=function(){var e=s.value;e.addEventListener("click",function(t){var a=!0,r=e.getAttribute("id");if("input"===t.target.tagName.toLowerCase()&&"checkbox"===t.target.type.toLowerCase()){var n=t.target;"th"===n.parentNode.tagName.toLowerCase()?u(r,document.querySelectorAll("#"+r+' tbody input[type="checkbox"]:'+(n.checked?"not(:checked)":"checked"))):"td"===n.parentNode.tagName.toLowerCase()&&u(r,n,!1)}else{var i=t.target;if("th"===i.tagName.toLowerCase()){var o=i.querySelector('input[type="checkbox"]');o&&u(r,document.querySelectorAll("#"+r+' tbody input[type="checkbox"]:'+(o.checked?"checked":"not(:checked)")))}else if("td"===i.tagName.toLowerCase())u(r,i.parentNode.querySelector('input[type="checkbox"]'));else if("button"===i.tagName.toLowerCase())a=!1;else if(i.closest(".js-status")){var l=i.closest(".js-status");t.preventDefault(),ajax.ajaxify({obj:l,method:"get",queue:"change-status",action:l.href,spinner:"replace"}).then(function(e){}).catch(function(e){})}}a&&t.stopPropagation()})},d=document.querySelectorAll("table[data-table]")[Symbol.iterator]();!(i=(s=d.next()).done);i=!0)c()}catch(e){o=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(o)throw l}}function u(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=!0,i=!1,o=void 0;try{for(var l,s=(t instanceof NodeList?t:[t])[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=l.value;a&&!c.disabled&&(c.checked=!c.checked);var d=c.closest("tr"),u=d.getAttribute("id"),f=r[e].indexOf(u);c.checked&&-1===f?r[e].push(u):c.checked||-1===f||r[e].splice(f,1),c.checked?d.classList.add("table-info"):d.classList.remove("table-info"),p(e)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}}function p(e){var t=document.querySelector("#"+e+"_wrapper").previousElementSibling,a=document.querySelector("#"+e),i=a.querySelectorAll('tbody input[type="checkbox"]'),o=a.querySelectorAll('tbody input[type="checkbox"]:checked'),l=a.querySelector('thead input[type="checkbox"]');if(0===o.length){if(l&&(l.checked=!1,"indeterminate"in l&&(l.indeterminate=!1)),t){var s=!0,c=!1,d=void 0;try{for(var u,p=t.querySelectorAll("[data-disabled]")[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var f=u.value;if(f.disabled=!0,f.classList.add("disabled"),f.classList.contains("js-link")&&(f.href=f.href.replace(new RegExp(escapeRegExp(n)+"$"),"")),f.classList.contains("js-upload-single")&&f.classList.contains("disabled")){var b=f.querySelector("input");b&&b.setAttribute("disabled","")}}}catch(e){c=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw d}}var h=!0,y=!1,g=void 0;try{for(var v,m=t.querySelectorAll("[data-hidden]")[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var k=v.value;k.setAttribute("hidden",""),k.classList.contains("js-link")&&(k.href=k.href.replace(new RegExp(escapeRegExp(n)+"$"),""))}}catch(e){y=!0,g=e}finally{try{h||null==m.return||m.return()}finally{if(y)throw g}}}}else{if(t){var w=!0,S=!1,x=void 0;try{for(var A,L=t.querySelectorAll("[data-disabled]")[Symbol.iterator]();!(w=(A=L.next()).done);w=!0){var q=A.value,T=parseInt(q.getAttribute("data-disabled"),10);if(T&&o.length>T){if(q.disabled=!0,q.classList.add("disabled"),q.classList.contains("js-link")&&(q.href=q.href.replace(new RegExp(escapeRegExp(n)+"$"),"")),q.classList.contains("js-upload-single")&&q.classList.contains("disabled")){var j=q.querySelector("input");j&&j.setAttribute("disabled","")}}else{var E=!0,_=!1,C=void 0;try{for(var N,R=(o instanceof NodeList?o:[o])[Symbol.iterator]();!(E=(N=R.next()).done);E=!0){if(N.value.closest("tr").classList.contains("protected")&&q.classList.contains("protected"))break;if(q.disabled=!1,q.classList.remove("disabled"),q.classList.contains("js-link")){var I=r[e].toString(),$=document.querySelector("#\\3"+I.charAt(0)+" "+I.substring(1)).getAttribute("data-slug"),B=q.getAttribute("data-url");n="/"+($||I)+(B?"/"+B:""),q.href+=n}if(q.classList.contains("js-upload-single")){var D=q.querySelector("input");D&&D.removeAttribute("disabled")}}}catch(e){_=!0,C=e}finally{try{E||null==R.return||R.return()}finally{if(_)throw C}}}}}catch(e){S=!0,x=e}finally{try{w||null==L.return||L.return()}finally{if(S)throw x}}var O=!0,H=!1,W=void 0;try{for(var F,M=t.querySelectorAll("[data-hidden]")[Symbol.iterator]();!(O=(F=M.next()).done);O=!0){var P=F.value,U=parseInt(P.getAttribute("data-hidden"),10);if(U&&o.length>U)P.setAttribute("hidden",""),P.classList.contains("js-link")&&(P.href=P.href.replace(new RegExp(escapeRegExp(n)+"$"),""));else{var z=P.getAttribute("data-if");if(z){var G=r[e].toString();document.querySelector("#\\3"+G.charAt(0)+" "+G.substring(1)+" "+z).innerHTML?t.querySelector("#button-"+P.getAttribute("data-value")).removeAttribute("hidden"):P.getAttribute("data-null")&&t.querySelector("#button-"+P.getAttribute("data-null")).removeAttribute("hidden")}else P.removeAttribute("hidden");if(P.classList.contains("js-link")){var J=r[e].toString(),K=document.querySelector("#\\3"+J.charAt(0)+" "+J.substring(1)).getAttribute("data-slug"),Q=P.getAttribute("data-url");n="/"+(K||J)+(Q?"/"+Q:""),P.href+=n}}}}catch(e){H=!0,W=e}finally{try{O||null==M.return||M.return()}finally{if(H)throw W}}}l&&(o.length===i.length?(l.checked=!0,"indeterminate"in l&&(l.indeterminate=!1)):(l.checked=!0,"indeterminate"in l&&(l.indeterminate=!0)))}}return $(document).on("preInit.dt",function(t,a){var n=new e.Api(a),i=n.table().node().getAttribute("id"),o=document.querySelector("#"+i).closest(".dataTables_wrapper").querySelector(".dataTables_filter input"),l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});$(o).off("keyup.DT input.DT"),$(o).on("keyup.DT input.DT",debounce(function(e){var t=document.querySelector("#"+i+' tbody input[type="checkbox"]:checked');t&&t.dispatchEvent(l),r[i]=[],n.search(e.target.value).draw()},100))}),$(document).on("draw.dt",function(t,a){var r=new e.Api(a).table().node().getAttribute("id");u(r,document.querySelectorAll("#"+r+' tbody input[type="checkbox"]:checked')),$('[data-toggle="popover"]',document.querySelector("#"+r)).popover()}),e.ext.renderer.pageButton.bootstrap=function(t,a,r,n,i,o){var l=new e.Api(t),s=t.oLanguage.oPaginate,c=t.oLanguage.oAria.paginate||{},d=0,u=document.activeElement.getAttribute("data-dt-idx"),p=document.createElement("ul");p.setAttribute("class","pagination"),a.innerHTML="",a.appendChild(p),function e(a,n){var u=function(e){e.preventDefault(),e.currentTarget.classList.contains("disabled")||l.page()===e.data.action||(l.page(e.data.action).draw("page"),refreshWaypoints())},p=!0,f=!1,b=void 0;try{for(var h,y=n[Symbol.iterator]();!(p=(h=y.next()).done);p=!0){var g=h.value;if(Array.isArray(g))e(a,g);else{var v=void 0,m=void 0;switch(g){case"ellipsis":v="&#x2026;",m="disabled";break;case"first":v=s.sFirst,m=g+(i>0?"":" disabled");break;case"previous":v=s.sPrevious,m=g+(i>0?"":" disabled");break;case"next":v=s.sNext,m=g+(i<o-1?"":" disabled");break;case"last":v=s.sLast,m=g+(i<o-1?"":" disabled");break;default:v=g+1,m=i===g?"active":""}if(v){var k=document.createElement("li");0===r&&"string"==typeof g&&k.setAttribute("id",t.sTableId+"_"+g),k.setAttribute("class",t.oClasses.sPageButton+" "+m),k.innerHTML='<a href="#" class="page-link" aria-controls="'+t.sTableId+'"'+(g in c?' aria-label="'+c[g]+'"':"")+' data-dt-idx="'+d+'" tabindex="'+t.iTabIndex+'">'+v+"</a>",a.appendChild(k),t.oApi._fnBindAction(k,{action:g},u),d++}}}}catch(e){f=!0,b=e}finally{try{p||null==y.return||y.return()}finally{if(f)throw b}}}(p,n),null!==u&&a.querySelector('[data-dt-idx="'+u+'"]').focus()},{setup:function(e){for(var a=function(){var e=_slicedToArray(i[n],2),a=e[0],o=e[1];if(o.data){var l=o.data.length,s=l<=100?"s":l<=1e3?"m":"l";r[a]=[];var c=!1,d=!1,u=!1,f=!0,b=!1,h=void 0;try{for(var y,g=o.columns[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value;if(v.checkbox){c=!0,v.disabled&&(d=v.disabled),v.protected&&(u=v.protected);break}}}catch(e){b=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(b)throw h}}t[a]=$("#"+a).DataTable({dom:o.options.dom?o.options.dom:'<"card-header"lf><"card-block table-responsive"tr><"card-footer"ip>',renderer:"bootstrap",classes:{sTable:"dataTable table table-hover "+(c?"table-checkbox ":"")+(o.options.class?o.options.class:""),sWrapper:"dataTables_wrapper card "+(o.options.wrapperClass?o.options.wrapperClass:""),sFilter:"dataTables_filter form-inline",sFilterInput:"form-control",sLength:"dataTables_length form-inline",sLengthSelect:"form-control mr-2 ml-2",sPageButton:"paginate_button page-item"},stateSave:!0,stateDuration:-1,processing:!0,retrieve:!0,deferRender:!0,rowReorder:{selector:".reorder",dataSrc:"order"},autoWidth:!1,stripeClasses:[],rowId:"id",language:unikatSettings.datatables.language,paging:l>10,searchDelay:100,search:{search:unikatSettings.datatablesSearch},pagingType:"s"===s?"numbers":"m"===s?"simple_numbers":"l"===s?"full_numbers":"simple",pageLength:"s"===s?25:"m"===s?50:"l"===s?100:10,lengthMenu:unikatSettings.datatables.lengthOptions[s],order:o.order?o.order:[],data:o.data?o.data:null,columns:function(e,t){var a=t.columns,r=[],n=!0,i=!1,o=void 0;try{for(var l,s=a[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=l.value,d=null;if(!c.hidden){if(c.checkbox)d=function(e,t,a,r){return'<input type="checkbox">'};else if(c.render){d={display:"display"};for(var u=0,p=Object.values(c.render);u<p.length;u++){var f=p[u];d[f]=f}}r.push({data:c.id,title:c.checkbox?'<input type="checkbox" value="1" name="check-'+e+'" id="input-check-'+e+'">':c.name,searchable:c.search,orderable:void 0===c.order||c.order,className:c.class,width:c.width?c.width:c.checkbox?"1.25em":null,render:d,type:c.type})}}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(a,o),createdRow:function(e,t,n){if(t.slug&&e.setAttribute("data-slug",t.slug),o.options.priorities&&t[o.options.priorities]&&(e.classList.add("priorities"),e.querySelector(".task-priority").classList.add("priority"+t[o.options.priorities])),o.options.cellBackground&&t[o.options.cellBackground]&&(e.classList.add("background"),e.querySelector(".bg-cell-color").classList.add(t[o.options.cellBackground])),o.options.rowBackground&&t[o.options.rowBackground]&&e.classList.add("highlighted"),c){var i=parseInt(e.getAttribute("id"),10);if(i===d||e.querySelector(".status")&&t.deleted_at){e.classList.add("disabled");var l=e.querySelector('input[type="checkbox"]');l&&(l.disabled=!0)}i===u&&e.classList.add("protected"),-1!==r[a].indexOf(e.id)&&(e.querySelector('input[type="checkbox"]').checked=!0,e.classList.add("table-info"))}},drawCallback:c?function(e){return p(a)}:null,footerCallback:o.options.footer?function(e,t,a,r,n){if(t.length)for(var i,l,s=this.api(),c=0,d=Object.entries(o.columns);c<d.length;c++){var u=_slicedToArray(d[c],2),p=u[0],f=u[1];f.footer&&(l=e.getElementsByTagName("th")[p],"sum"===f.footer.function?(i=s.column(p).data().reduce(function(e,t){return e+(t?Number(t.toString().replace(/[^0-9\.-]+/g,"")):0)},0),f.footer.currency?l.textContent=new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(i).replace(/,/g," "):l.textContent=i):"count"===f.footer.function&&(i=s.column(p).data().count(),l.textContent=i))}}:null}),unikatSettings.datatablesSearch&&t[a].search(unikatSettings.datatablesSearch).draw(),t[a].on("row-reordered",function(e,t,a){if(t.length){for(var r=new FormData,n=0,i=Object.entries(a.values);n<i.length;n++){var o=_slicedToArray(i[n],2),l=o[0],s=o[1];r.append(l,s)}ajax.ajaxify({method:"post",queue:"reorder",action:e.target.getAttribute("data-route"),data:r}).then(function(e){}).catch(function(e){})}}),datatable.sticky(a),ajax.bind(document.querySelector("#"+a))}},n=0,i=Object.entries(e);n<i.length;n++)a()},sticky:function(e){if(!a[e]){var t=document.querySelector("#"+e+"-sticky-wrapper");if(t){a[e]=new Waypoint({element:t,handler:function(e){"down"===e?this.element.firstElementChild.classList.add("pinned"):this.element.firstElementChild.classList.remove("pinned")}});var r=t.nextElementSibling;a[e+"-wrapper"]=new Waypoint({element:r,handler:function(e){t.firstElementChild.classList.toggle("unpinned")},offset:function(){var e=r.querySelector(".card-footer")||r.querySelector(".card-block")||{offsetHeight:0},a=r.offsetHeight-r.offsetTop-e.offsetHeight+t.offsetHeight;return-a}})}}},selected:r,draw:function(e){for(var a=function(){var a=i[n],o=t[a],l=void 0;e[a].deleted?o.rows([e[a].deleted]).remove().draw():e[a].added?(l=o.row.add(e[a].added).draw().node(),$('[data-toggle="popover"]').popover(),ajax.bind(l)):e[a].updated?(l=o.row("#"+e[a].updated.id).data(e[a].updated).draw(!1).node(),$('[data-toggle="popover"]').popover(),ajax.bind(l)):(o.clear().rows.add(e[a].data).draw(),document.querySelector("#"+a).closest(".dataTables_wrapper").classList.remove("table-hidden")),r[a]=[],e[a].select||p(a),l&&(l.classList.add("fade-out-background"),l.classList.add("table-success"),l.classList.remove("table-info"),l.addEventListener("mouseover",function(){l.classList.remove("fade-out-background")}),window.setTimeout(function(){l.classList.remove("table-success"),e[a].select&&u(a,l.querySelector('input[type="checkbox"]'))},1e3))},n=0,i=Object.keys(e);n<i.length;n++)a()}}}();